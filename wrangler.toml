name = "hsianghsing-api"
main = "worker.js"
compatibility_date = "2025-10-25"

# ======================================================
# 🌍 綁定 Worker 到正式網域
# ------------------------------------------------------
routes = [
  { pattern = "hsianghsing.org/api/*", zone_id = "f23528900e3fe147202e4ee63e884590" },
  { pattern = "www.hsianghsing.org/api/*", zone_id = "f23528900e3fe147202e4ee63e884590" }
]

# ======================================================
# 🏭 正式環境變數
# ------------------------------------------------------
[vars]
# 🚨 這裡一定要是「你的 Node.js 伺服器」實際運行位置（不是自己）
# 如果你的 Node.js 在同一台 Cloudflare Pages 上，就不該再透過 Worker。
# 如果你目前還在本機開發，可以暫時留空或指向 Render / Railway 的 Node URL。
NODE_API = "http://localhost:3000"
# 範例（日後你有部署 Node.js 雲端後改這裡）：
# NODE_API = "https://teaorder-server.onrender.com"

# 若要限制前端網域，可填寫：
ALLOW_ORIGIN = "https://hsianghsing.org"

# ======================================================
# 🧪 開發模式設定
# ------------------------------------------------------
[env.development]
[env.development.vars]
NODE_API = "http://localhost:3000"
ALLOW_ORIGIN = "*"
