name = "hsianghsing-api"
main = "worker.js"
compatibility_date = "2025-10-25"

# ======================================================
# ğŸŒ ç¶å®š Worker åˆ°æ­£å¼ç¶²åŸŸ
# ------------------------------------------------------
# æ­¤ Worker å°ˆè²¬ä»£ç† /api/* è«‹æ±‚åˆ° Node.js å¾Œç«¯
# ä¾‹å¦‚ï¼š
#   https://hsianghsing.org/api/order
#   https://www.hsianghsing.org/api/member
# ======================================================
routes = [
  { pattern = "hsianghsing.org/api", custom_domain = true },
  { pattern = "hsianghsing.org/api/*", custom_domain = true },
  { pattern = "www.hsianghsing.org/api", custom_domain = true },
  { pattern = "www.hsianghsing.org/api/*", custom_domain = true }
]

# ======================================================
# ğŸ­ æ­£å¼ç’°å¢ƒè®Šæ•¸
# ------------------------------------------------------
# é€™äº›è®Šæ•¸æœƒåœ¨ Cloudflare Worker åŸ·è¡Œæ™‚æ³¨å…¥ã€‚
# ======================================================
[vars]
# Node.js API ç¶²å€ï¼ˆRender / Railway / Fly.io / Vercel ç­‰ï¼‰
NODE_API = "https://hsianghsing.org/api"

# è‹¥è¦é™åˆ¶å‰ç«¯ç¶²åŸŸï¼Œå¯å¡«å¯«ï¼š
ALLOW_ORIGIN = "https://hsianghsing.org"

# ======================================================
# ğŸ§ª é–‹ç™¼æ¨¡å¼è¨­å®š
# ------------------------------------------------------
# åœ¨æœ¬æ©ŸåŸ·è¡Œ wrangler dev / pages dev æ™‚ï¼Œ
# Worker å°‡ä»£ç† API è«‹æ±‚è‡³ localhost:3000ã€‚
# ======================================================
[env.development]
[env.development.vars]
NODE_API = "http://localhost:3000/api"
ALLOW_ORIGIN = "*"
